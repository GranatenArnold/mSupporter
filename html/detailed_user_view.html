<!DOCTYPE html>
<html>
	<head>
		
	</head>
	
	<body>
		<div class="templateUser">
			<div class="panel">
				<div class="panel-heading" id="kopf">
					<h3 class="panel-title"></h3>
				</div>
				<div class="panel-body">
					<div class="well">
						<div id="id"></div>
						<div id="username"></div>
						<div id="email"></div>
						<div id="sprache"></div>
						<div id="tabelle_rollen"></div>
					</div>
				</div>
			</div>
		</div>
		
		<script>
			$
				.ajax({
					url : "/report/toverview/rest/router.php/user/id/#ID#",
					context : document.body
				})
				.done(
						function(res) {
							directive = {
								'.panel-title' : function(a) {
									a = a.context;
									var userID = a.id;
									var vorname = a.firstname;
									var nachname = a.lastname;
									var userLink = "<a href='/user/profile.php?id=" + userID + "'>" + vorname
											+ " " + nachname + "</a>";
									
									return userLink;
								},
								/*
								'#kopf@style' : function (a) {
									var temp = "tu-darmstadt.de";
									var email = a.email;
									if(email.indexOf(temp) < 1) {
										return "background-color: #F5A300;";
									}
									else {
										return "background-color: #99A604;";
									}
								},
								*/
								'#id' : function(a) {
									a = a.context;
									return "User ID: " + a.id;
								},
								
								'#username' : function(a) {
									a = a.context;
									return "Benutzername: " + a.username;
								},
								
								'#email' : function (a) {
									a = a.context;
									var email = a.email;
									
									return "Email: " + "<a href='mailto:" + email + "'>" + email + "</a>";
								},
								
								'#sprache' : function (a) {
									a = a.context;
									var sprache = a.lang;
									
									return "Sprache: " + sprache;
								},
							};
							//console.log(res);
							var json = JSON.parse(res);
							$('div.templateUser')
									.render(json.Records, directive);
							// alert(res);
							console.log(json);
							a = json.Records.roles;
									var data = new google.visualization.DataTable();
									data.addColumn('number', 'ID');
									data.addColumn('string', 'Semester');
									data.addColumn('string', 'FB');
									data.addColumn('string', 'Kurs');
									data.addColumn('string', 'Rolle');
									var array = new Array();
									//console.log(result);
									$.each(a, function(id, felder) {
										//console.log(felder);
										var subarray = new Array();
										subarray.push(parseInt(felder.course));
										subarray.push(felder.semester);
										subarray.push(felder.fb);
										subarray.push(felder.fullname);
										subarray.push(felder.name);
										//data.addRow(array);
										//data.addRow('boolean', eigenschaften.bezeichnung);
										array.push(subarray);
									});
									data.addRows(array);
									var table = new google.visualization.Table(document.getElementById('tabelle_rollen'));
									table.draw(data, {
										showRowNumber : false
									});
						});
		</script>
	</body>
</html>
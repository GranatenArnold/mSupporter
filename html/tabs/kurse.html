<!DOCTYPE html>
<html>
	<head>
 		<!-- Create table -->
		<script type="text/javascript">
		
			function KurstabelleZeichnen(suchstring) {
				$.ajax({
					url: "https://mdl-alpha.un.hrz.tu-darmstadt.de/report/toverview/rest/router.php/course/?query=" + suchstring,
					dataType: 'json',
				}).done(function (result) {
					var data = new google.visualization.DataTable();
					data.addColumn('number', 'ID');
			        data.addColumn('string', 'Semester');
			        data.addColumn('string', 'FB');
			        data.addColumn('string', 'Name');
			        var array = new Array();
			        result = result.Records;
			        //console.log(result);
        	    	$.each(result, function(id, felder) {
        	    		console.log(felder);
        	    		
        	    		var subarray = new Array();
        	    		subarray.push(parseInt(felder.id));
        	    		subarray.push(felder.semester);
        	    		subarray.push(felder.fb);
        	    		subarray.push(felder.fullname);
        	    		//data.addRow(array);
        				//data.addRow('boolean', eigenschaften.bezeichnung);
        				array.push(subarray);
        			});
        	    	data.addRows(array);
			        var table = new google.visualization.Table(document.getElementById('courses'));
			        table.draw(data, {showRowNumber: false});
			        google.visualization.events.addListener(table, 'select', function() {
			        	console.log(table.getSelection());
			        });
			        
				});
			}
			
	    	$(document).ready(function () {
    			$( "#search" ).keyup(function() {
				  KurstabelleZeichnen($( this ).val());
				});
				
			
				
			
				
				
				
        		jQuery(document.body).on('click', 'tr', function(event) {
    				$.get("/report/toverview/html/detailed_course_view.html", function( inhalt ) {
    					var x = $(event.currentTarget);
    					//console.log(x.attr('data-record-key'));
    					inhalt = inhalt.replace(/#ID#/g, x.attr('data-record-key'));
    					//console.log(inhalt);
    					$( "#getCourse" ).html(inhalt);
    					$('body,html').animate({scrollTop:0},800);
    				});
    			});
        	});
		</script>
	</head>

	<body>
		<div class="row">
			<div class="col-md-6">
				<div>
					Kurs suchen:
	        		<input id="search"></input>
	        	</div>
	    	</div>
		</div>
	
		<div class="row">
			<div class="col-md-6">
	        	<div id="courses"></div>
	        </div>
	        <div class="col-md-6">
				<div id = "getCourse"></div>
	    	</div>
		</div>
	</body>
</html>
<!DOCTYPE html>
<html>
	<head>
		<title>tOverview</title>
		<meta charset="UTF-8">
		<base target="_blank">
		
		<!-- Include CSS theme -->
		<link rel="stylesheet" href="../toverview/css/jquery-ui-1.10.4.css" />
		
		<!-- Include jQuery -->
		<script src="../toverview/js/jquery-1.10.2.js"></script>
		<script src="../toverview/js/jquery-ui.js"></script>
		
		<!-- Include Bootstrap -->
		<link rel="stylesheet" href="../toverview/css/bootstrap.min.css" />

		<!-- Optional theme -->
		<link rel="stylesheet" href="../toverview/css/bootstrap-theme.min.css">
		<link rel="stylesheet" href="../toverview/jtable/themes/metro/lightgray/jtable.min.css">
		<link rel="stylesheet" href="../toverview/jtable/themes/metro/darkorange/jtable.min.css" type="text/css" />

		<!-- Include one of jTable script file -->
		<script src="../toverview/jtable/jquery.jtable.min.js" type="text/javascript"></script>

		<!-- Include jTable style -->
		<link rel="stylesheet" href="../toverview/jtable/themes/metro/darkorange/jtable.min.css" type="text/css" />
		
		<!-- Include Pure Engine -->
		<script src="../toverview/js/pure.js"></script>

		<!-- Hier wird die Tabelle initiiert -->
		<script type="text/javascript">
			$(document).ready(function () {
			
	    		// Tab Inhalte als eigene html in die Tabelle laden:
		    	
		    	//
	    		// Tab: Kurse
	    		//
				$.get("../toverview/html/tabs/kurse.html", function( inhalt ) {
					$( "#kurse" ).html(inhalt);
				});
	    
	    
				//
	    		// Tab: Nutzer
	    		//
				$.get("../toverview/html/tabs/nutzer.html", function( inhalt ) {
					$( "#nutzer" ).html(inhalt);
				});
		
	    
				//
				// Tab: Dateien
				//
				$.get("../toverview/html/tabs/dateien.html", function ( inhalt ) {
					$( "#dateien" ).html(inhalt);
				});
			
    	    
    			//
				// Tab: Kommunikation
				//
    			$.get("../toverview/html/tabs/kommunikation.html", function ( inhalt ) {
    				$( "#kommunikation" ).html(inhalt);
    			});
			
    		
				//
				// Tab: Tests
				//
				$.get("../toverview/html/tabs/tests.html", function ( inhalt ) {
					$( "#tests" ).html(inhalt);
				});
				
				
				//
				// Tab: Kooperation
				//
				$.get("../toverview/html/tabs/kooperation.html", function ( inhalt ) {
					$( "#koop" ).html(inhalt);
				});
				
				
				//
				// Tab: RÃ¼ckmeldungen
				//
				$.get("../toverview/html/tabs/rueckmeldungen.html", function ( inhalt ) {
					$( "#rueckmeldungen" ).html(inhalt);
				});
				
				
				//
				// Tab: Lehrorganisation
				//
				$.get("../toverview/html/tabs/lehrorganisation.html", function ( inhalt ) {
					$( "#lehrorganisation" ).html(inhalt);
				});
	    		
				
	    		//
	    		// Bei Klick auf eine Zeile Ã¶ffnet sich automatisch der erste Tab ("Kurse"), auÃŸer, wenn im Tab "Nutzer/innen" auf eine Zeile geklickt wird.
	    		// In dem Fall bleibt das Tab aktiv.
	    		// Die Tab ID des Nutzer Tabs muss angepasst werden, falls weitere Tabs dazu kommen (Momentan ist die Tab ID: 1)
	    		//
    			jQuery(document.body).on('click', '.jtable-data-row', function() {
    				var curTab = $(".ui-tabs-active");
    				var curTabIndex = curTab.index();
    				//alert(curTabIndex);
    				if (curTabIndex == 1) {
    					$("#tabs").tabs({active: 1});
    				}
    				else {
    					$("#tabs").tabs({active: 0});
    				}
				});
			});
		</script>
	</head>

	<body>
		<script>
		$(function() {
	    	$( "#tabs" ).tabs();
	    });
		</script>
		
		<div id="tabs">
			<ul>
				<li><a href="#tabs-1">Kurse</a></li>
				<li><a href="#tabs-2">Nutzer/innen</a></li>
				<li><a href="#tabs-stats">Statistiken</a>
		    	<li><a href="#tabs-3">Dateien</a></li>
		    	<li><a href="#tabs-4">Kommunikation</a></li>
		    	<li><a href="#tabs-5">(Selbst-ÃœberprÃ¼fung)</a></li>
		    	<li><a href="#tabs-6">Kooperation</a></li>
		    	<li><a href="#tabs-7">Lehrorganisation</a></li>
				<li><a href="#tabs-8">RÃ¼ckmeldungen</a></li>
			</ul>
			<div id="tabs-1">
				<div id="kurse"></div>
			</div>
			<div id="tabs-2">
				<div id="nutzer"></div>
			</div>
			<div id="tabs-3">
				<div id="dateien"></div>
			</div>
			<div id="tabs-4">
				<div id="kommunikation"></div> 
			</div>
			<div id="tabs-5">
				<div id="tests"></div> 
			</div>
			<div id="tabs-6">
				<div id="koop"></div>
			</div>
			<div id="tabs-7">
				<div id="lehrorganisation"></div>
			</div>
			<div id="tabs-8">
				<div id="rueckmeldungen"></div>
			</div>
			<div id="tabs-stats">
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3>Seite</h3>
					</div>
					<div class="panel-body">
					<script type="text/javascript" src="https://www.google.com/jsapi"></script>
				    <script type="text/javascript">
				
				      // Load the Visualization API and the piechart package.
				      google.load('visualization', '1.0', {'packages':['corechart']});
				
				      // Set a callback to run when the Google Visualization API is loaded.
				      google.setOnLoadCallback(
				    		  $.ajax({
				    			  url: "../toverview/rest/router.php/Category",
				    			  dataType: 'json',
				    			}).done(function(data) {
				    			  drawChart(data);
				    			})
				      );
				
				      // Callback that creates and populates a data table,
				      // instantiates the pie chart, passes in the data and
				      // draws it.
				      function drawChart(jsondata) {
						
				        // Create the data table.
				        var data = new google.visualization.DataTable();
				        data.addColumn('string', 'Topping');
				        data.addColumn('number', 'Slices');
				        //var rows = 
				        var array = new Array();
				        var cats = jsondata.subcategories;
				        
				        jQuery.each(cats, function() {
				        	name = this.name;
				        	kursegesamt = parseInt(this.kursegesamt);
				        	var array = new Array(name, kursegesamt);
				        	console.log(array);
				        	//array.push(new Array(name, kursegesamt));
				        	data.addRow(array);
				        });
				        //console.log(array);
				        
				        //data.addRows(array);
				        /*
				        data.addRows([
				          ['Mushrooms', 3],
				          ['Onions', 1],
				          ['Olives', 1],
				          ['Zucchini', 1],
				          ['Pepperoni', 2]
				        ]);
						*/
				        // Set chart options
				        var options = {'title':'Semester',
				                       'width':800,
				                       'height':600};
				
				        // Instantiate and draw our chart, passing in some options.
				        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
				        chart.draw(data, options);
				      }
				    </script>
				    	<div id='chart_div'></div>
					</div>
				</div>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3>Semester</h3>
						
					</div>
					<div class="panel-body">
					</div>
				</div>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3>Fachbereich</h3>
					</div>
					<div class="panel-body">
					</div>
				</div>
			</div>
		</div>
		<script>
		</script>
	</body>
</html>